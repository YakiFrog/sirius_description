<?xml version="1.0"?>
<sdf version="1.9">
  <world name="sirius_world">
    <!-- 物理シミュレーションの設定 -->
    <physics name="1ms" type="ignored">
      <max_step_size>0.001</max_step_size>
      <real_time_factor>1.0</real_time_factor>
    </physics>

    <!-- 必要なプラグインの読み込み -->
    <plugin filename="gz-sim-physics-system" name="gz::sim::systems::Physics"/>
    <plugin filename="gz-sim-scene-broadcaster-system" name="gz::sim::systems::SceneBroadcaster"/>
    <plugin filename="gz-sim-user-commands-system" name="gz::sim::systems::UserCommands"/>

    <!-- 太陽光源の設定 -->
    <light type="directional" name="sun">
      <cast_shadows>true</cast_shadows>
      <pose>0 0 10 0 0 0</pose>
      <diffuse>0.8 0.8 0.8 1</diffuse>
      <specular>0.2 0.2 0.2 1</specular>
      <attenuation>
        <range>1000</range>
        <constant>0.9</constant>
        <linear>0.01</linear>
        <quadratic>0.001</quadratic>
      </attenuation>
      <direction>-0.5 0.1 -0.9</direction>
    </light>

    <!-- 地面モデルの設定 -->
    <model name="ground_plane">
      <static>true</static>
      <link name="link">
        <collision name="collision">
          <geometry>
            <plane>
              <normal>0 0 1</normal>
            </plane>
          </geometry>
        </collision>
        <visual name="visual">
          <geometry>
            <plane>
              <normal>0 0 1</normal>
              <size>100 100</size>
            </plane>
          </geometry>
          <material>
            <ambient>0.8 0.8 0.8 1</ambient>
            <diffuse>0.8 0.8 0.8 1</diffuse>
            <specular>0.8 0.8 0.8 1</specular>
          </material>
        </visual>
      </link>
    </model>

    <model name="sirius3">
    <pose>0 0 0.0825 0 0 0</pose>

    <!-- Base Link -->
    <link name="base_link">
      <pose>0.0002947164165949175 0.09943035225547465 0.3230235286090795 0 0 0</pose>
      <inertial>
        <mass>55.93</mass>
        <inertia>
          <ixx>2.8808637737854452</ixx>
          <ixy>0.000982314201767401</ixy>
          <ixz>-0.0034301184728964904</ixz>
          <iyy>2.459771630191444</iyy>
          <iyz>0.26295068207750116</iyz>
          <izz>2.1448545974410616</izz>
        </inertia>
      </inertial>
      <visual name="base_visual">
        <geometry>
          <mesh>
            <uri>file:///home/kotantu-nuc/sirius_jazzy_ws/src/sirius_description/urdf/meshes/Sirius3-body-v2.stl</uri>
            <scale>0.001 0.001 0.001</scale>
          </mesh>
        </geometry>
        <material>
          <ambient>0.1 0.3 0.6 1</ambient>
          <diffuse>0.1 0.3 0.6 1</diffuse>
          <specular>0.2 0.4 0.8 1</specular>
        </material>
      </visual>
      <collision name="base_collision">
        <geometry>
          <mesh>
            <uri>file:///home/kotantu-nuc/sirius_jazzy_ws/src/sirius_description/urdf/meshes/Sirius3-body-v2.stl</uri>
            <scale>0.001 0.001 0.001</scale>
          </mesh>
        </geometry>
      </collision>
    </link>

    <!-- Left Wheel -->
    <link name="left_wheel">
      <pose>0.18129471641659492 0.09795201925547465 0.4553569872676875 -3.141592653589793 -1.5707963267948966 0</pose>
      <inertial>
        <pose>0.0 0.0 0.021535 0 0 0</pose>
        <mass>26.684250609189966</mass>
        <inertia>
          <ixx>0.13041983338763763</ixx>
          <ixy>-1.9456112928552954e-05</ixy>
          <ixz>-5.293518847926393e-06</ixz>
          <iyy>0.13040791997952428</iyy>
          <iyz>1.3386522533801598e-05</iyz>
          <izz>0.24147472596060549</izz>
        </inertia>
      </inertial>
      <visual name="left_wheel_visual">
        <pose>0.00026615125671387575 -0.0003525431147384645 -0.019999996185302748 -3.141592653589793 -1.5707963267948966 0</pose>
        <geometry>
          <mesh>
            <uri>file:///home/kotantu-nuc/sirius_jazzy_ws/src/sirius_description/urdf/meshes/Left-Wheel-v1.stl</uri>
            <scale>0.001 0.001 0.001</scale>
          </mesh>
        </geometry>
        <material>
          <ambient>0.3 0.3 0.3 1</ambient>
          <diffuse>0.3 0.3 0.3 1</diffuse>
          <specular>0.15 0.15 0.15 1</specular>
        </material>
      </visual>
      <collision name="left_wheel_collision">
        <pose>0.00026615125671387575 -0.0003525431147384645 -0.019999996185302748 -3.141592653589793 -1.5707963267948966 0</pose>
        <geometry>
          <mesh>
            <uri>file:///home/kotantu-nuc/sirius_jazzy_ws/src/sirius_description/urdf/meshes/Left-Wheel-v1.stl</uri>
            <scale>0.001 0.001 0.001</scale>
          </mesh>
        </geometry>
      </collision>
    </link>

    <!-- Right Wheel -->
    <link name="right_wheel">
      <pose>-0.18070528358340508 0.09795201925547465 0.4555569872676875 0.0 -1.5707963267948966 0</pose>
      <inertial>
        <pose>0.0 0.0 0.021535 0 0 0</pose>
        <mass>26.680591288269447</mass>
        <inertia>
          <ixx>0.1304158303609999</ixx>
          <ixy>-8.207010673684685e-06</ixy>
          <ixz>-1.3876354790554046e-05</ixz>
          <iyy>0.1303611813000909</iyy>
          <iyz>1.4294269790344344e-06</iyz>
          <izz>0.24143130580426014</izz>
        </inertia>
      </inertial>
      <visual name="right_wheel_visual">
        <pose>-0.00011675030934453545 0.00014720826142882893 -0.019999996185302748 -0.3490658503988659 1.5707963267948966 0</pose>
        <geometry>
          <mesh>
            <uri>file:///home/kotantu-nuc/sirius_jazzy_ws/src/sirius_description/urdf/meshes/Right-Wheel-v1.stl</uri>`
            <scale>0.001 0.001 0.001</scale>
          </mesh>
        </geometry>
        <material>
          <ambient>0.3 0.3 0.3 1</ambient>
          <diffuse>0.3 0.3 0.3 1</diffuse>
          <specular>0.15 0.15 0.15 1</specular>
        </material>
      </visual>
      <collision name="right_wheel_collision">
        <pose>-0.00011675030934453545 0.00014720826142882893 -0.019999996185302748 -0.3490658503988659 1.5707963267948966 0</pose>
        <geometry>
          <mesh>
            <uri>file:///home/kotantu-nuc/sirius_jazzy_ws/src/sirius_description/urdf/meshes/Right-Wheel-v1.stl</uri>
            <scale>0.001 0.001 0.001</scale>
          </mesh>
        </geometry>
      </collision>
    </link>

    <!-- Joints -->
    <joint name="left_wheel_joint" type="revolute">
      <parent>base_link</parent>
      <child>left_wheel</child>
      <axis>
        <xyz>0 0 1</xyz>
        <limit>
          <effort>100</effort>
          <velocity>100</velocity>
        </limit>
        <dynamics>
          <damping>0.1</damping>
          <friction>0.1</friction>
        </dynamics>
      </axis>
    </joint>

    <joint name="right_wheel_joint" type="revolute">
      <parent>base_link</parent>
      <child>right_wheel</child>
      <axis>
        <xyz>0 0 -1</xyz>
        <limit>
          <effort>100</effort>
          <velocity>100</velocity>
        </limit>
        <dynamics>
          <damping>0.1</damping>
          <friction>0.1</friction>
        </dynamics>
      </axis>
    </joint>

    <!-- Differential Drive Plugin -->
    <plugin filename="gz-sim-diff-drive-system" name="gz::sim::systems::DiffDrive">
      <topic>cmd_vel</topic>    <!-- 速度指令のトピック名 -->
      <left_joint>left_wheel_joint</left_joint>    <!-- 左車輪のジョイント名 -->
      <right_joint>right_wheel_joint</right_joint>    <!-- 右車輪のジョイント名 -->
      <wheel_separation>0.362</wheel_separation>    <!-- 車輪間距離 -->
      <wheel_radius>0.0825</wheel_radius>    <!-- 車輪半径 -->
      <odom_publish_frequency>50</odom_publish_frequency>    <!-- Odometry公開の頻度 -->
    </plugin>
    
  </model>
  </world>
</sdf>
